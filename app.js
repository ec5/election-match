!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},a={},n={},l={}.hasOwnProperty,r=/^\.\.?(\/|$)/,u=function(e,t){for(var a,n=[],l=(r.test(t)?e+"/"+t:t).split("/"),u=0,i=l.length;i>u;u++)a=l[u],".."===a?n.pop():"."!==a&&""!==a&&n.push(a);return n.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(a){var n=u(i(t),a);return e.require(n,t)}},c=function(e,t){var n=null;n=h&&h.createHot(e);var l={id:e,exports:{},hot:n};return a[e]=l,t(l.exports,o(e),l),l.exports},s=function(e){return n[e]?s(n[e]):e},d=function(e,t){return s(u(i(e),t))},f=function(e,n){null==n&&(n="/");var r=s(e);if(l.call(a,r))return a[r].exports;if(l.call(t,r))return c(r,t[r]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};f.alias=function(e,t){n[t]=e};var m=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,v=function(e){if(m.test(e)){var t=e.replace(m,"");l.call(n,t)&&n[t].replace(m,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var a=e.replace(p,"");l.call(n,a)||(n[a]=e)}};f.register=f.define=function(e,n){if("object"==typeof e)for(var r in e)l.call(e,r)&&f.register(r,e[r]);else t[e]=n,delete a[e],v(e)},f.list=function(){var e=[];for(var a in t)l.call(t,a)&&e.push(a);return e};var h=e._hmr&&new e._hmr(d,f,t,a);f._cache=a,f.hmr=h&&h.wrap,f.brunch=!0,e.require=f}}(),function(){var e;window;require.register("initialize.js",function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l=t("lodash"),r=n(l),u=t("react"),i=n(u),o=t("react-dom"),c=t("jquery"),s=n(c);t("select2");var d={},f={yes:1,no:1,opposite:-1,novote:0},m=function(e,t){return function(a){var n=t.val();(0,o.render)(i["default"].createElement("form",null,i["default"].createElement("h2",null,"議案投票"),i["default"].createElement("p",{className:"lead"},"假如你是立法會議員，你會如何投票？"),i["default"].createElement("div",{className:"list-group"},r["default"].map(n,function(e,t){var a=d.motions[e];return i["default"].createElement("div",{key:t,className:"form-group list-group-item lead"},i["default"].createElement("h4",{className:"list-group-item-heading"},a.title),i["default"].createElement("label",{className:"radio-inline"},i["default"].createElement("input",{type:"radio",name:e,value:"yes"})," 贊成"),i["default"].createElement("label",{className:"radio-inline"},i["default"].createElement("input",{type:"radio",name:e,value:"no"})," 反對"))}))),e)}},p=function(e){return{yes:"no",no:"yes"}[e]},v=function(e){return function(t){var a=(0,s["default"])(t.target).closest("form"),n=a.serializeArray(),l=r["default"].sortBy(r["default"].map(d.members,function(e,t){var a=r["default"].reduce(n,function(t,a){var n=a.name,l=a.value,r=e.votes[n];return r===l?(t.score+=f[l],t[l]+=1):r===p(l)?(t.score+=f.opposite,t.opposite+=1):(t.score+=f.novote,t.novote+=1,t[r]+=1),t},{yes:0,no:0,opposite:0,novote:0,absent:0,present:0,abstain:0,score:0});return{name:t,matching:a}}),function(e){return-1*e.matching.score});(0,o.render)(i["default"].createElement("div",null,i["default"].createElement("h3",null,"結果"),i["default"].createElement("div",{className:"table-responsive"},i["default"].createElement("table",{className:"table table-striped table-hover table-condensed"},i["default"].createElement("thead",null,i["default"].createElement("tr",null,i["default"].createElement("th",null,"議員"),i["default"].createElement("th",null,"相似分數"),i["default"].createElement("th",null,"相同投票"),i["default"].createElement("th",null,"相反投票"),i["default"].createElement("th",null,"相同贊成"),i["default"].createElement("th",null,"相同反對"),i["default"].createElement("th",null,"沒有表態"))),i["default"].createElement("tbody",null,r["default"].map(l,function(e,t){return i["default"].createElement("tr",{key:t},i["default"].createElement("td",null,e.name),i["default"].createElement("td",null,e.matching.score),i["default"].createElement("td",null,e.matching.yes+e.matching.no),i["default"].createElement("td",null,e.matching.opposite),i["default"].createElement("td",null,e.matching.yes),i["default"].createElement("td",null,e.matching.no),i["default"].createElement("td",null,e.matching.novote))}))))),e)}};document.addEventListener("DOMContentLoaded",function(){var e=(0,s["default"])("#app").html(""),t=(0,s["default"])("<div>載入議案資料中⋯⋯</div>").appendTo(e),a=(0,s["default"])('<select name="select-items" multiple style="width: 100%" />'),n=(0,s["default"])("<div />"),l=(0,s["default"])("<div />");a.on("change",m(n.get(0),a)),n.on("change","input",v(l.get(0))),s["default"].getJSON("data.json",function(u){d=u,r["default"].each(u.motions,function(e,t){e.id=t,e.group=e.meetingType+"_"+e.voteDate});var i=r["default"].groupBy(u.motions,"group");a.appendTo(e).select2({data:r["default"].map(i,function(e,t){var a=r["default"].map(e,function(e){return{id:e.id,text:e.title}});return{text:t,children:a}}),theme:"bootstrap"}),t.text("共 "+r["default"].size(u.motions)+" 個議案"),n.appendTo(e),l.appendTo(e)})})}),require.alias("react/react.js","react"),require.alias("lodash/lodash.js","lodash"),require.alias("select2/dist/js/select2.js","select2"),require.alias("jquery/dist/jquery.js","jquery"),require.alias("process/browser.js","process"),require.alias("base64-js/lib/b64.js","base64-js"),require.alias("buffer/index.js","buffer"),e=require("process"),require.register("___globals___",function(e,t,a){})}(),require("___globals___");