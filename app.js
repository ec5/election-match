!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},a={}.hasOwnProperty,l=/^\.\.?(\/|$)/,o=function(e,t){for(var r,n=[],a=(l.test(t)?e+"/"+t:t).split("/"),o=0,u=a.length;u>o;o++)r=a[o],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},i=function(t){return function(r){var n=o(u(t),r);return e.require(n,t)}},c=function(e,t){var n=null;n=h&&h.createHot(e);var a={id:e,exports:{},hot:n};return r[e]=a,t(a.exports,i(e),a),a.exports},s=function(e){return n[e]?s(n[e]):e},d=function(e,t){return s(o(u(e),t))},f=function(e,n){null==n&&(n="/");var l=s(e);if(a.call(r,l))return r[l].exports;if(a.call(t,l))return c(l,t[l]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};f.alias=function(e,t){n[t]=e};var m=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,v=function(e){if(m.test(e)){var t=e.replace(m,"");a.call(n,t)&&n[t].replace(m,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");a.call(n,r)||(n[r]=e)}};f.register=f.define=function(e,n){if("object"==typeof e)for(var l in e)a.call(e,l)&&f.register(l,e[l]);else t[e]=n,delete r[e],v(e)},f.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var h=e._hmr&&new e._hmr(d,f,t,r);f._cache=r,f.hmr=h&&h.wrap,f.brunch=!0,e.require=f}}(),function(){var e;window;require.register("components/AboutSection.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=n(a),o=function(){return l["default"].createElement("section",{className:"container"},l["default"].createElement("h2",null,"注意事項"),l["default"].createElement("p",{className:"lead"},"一如所有的評分機制很難做到全面客觀，依賴一至數項的數據分析結果，不宜作為",l["default"].createElement("strong",null,"唯一"),"的投票依據。本網雖已儘量做得客觀，始終也有局限，在閱讀結果時應多加留意，不要盲目接受。"),l["default"].createElement("ul",null,l["default"].createElement("li",null,l["default"].createElement("p",null,"由於本網只有 2012 年至今的投票結果，對於2012 年以前的議員或新進的參選人無法作出分析。")),l["default"].createElement("li",null,l["default"].createElement("p",null,"議員可能因為一些原因沒有投票，因此在投票數量比其他人少的情況下，「配對結果」的排序或會因而降低。例如："),l["default"].createElement("ul",null,l["default"].createElement("li",null,l["default"].createElement("p",null,"立法會主席或會議主持人很少會投票。")),l["default"].createElement("li",null,l["default"].createElement("p",null,"未完成任期或補選的議員。")))),l["default"].createElement("li",null,l["default"].createElement("p",null,"議員可能在提出修正案或為表示支持某一修正案時，選擇不投票或反對，這或會讓配對結果出現誤差。")),l["default"].createElement("li",null,l["default"].createElement("p",null,"由於立法會所提供的公開數據除了議案標題外，並不包含議案摘要，可能以致一些議案因此被忽略。")),l["default"].createElement("li",null,l["default"].createElement("p",null,"「配對結果」所使用的計分方法頗為簡單，或有不妥之處。如有對統計學比較熟悉的朋友，請不吝賜教。"))),l["default"].createElement("h2",{style:{marginTop:50}},"關於本網"),l["default"].createElement("p",{className:"lead"},"本網旨在透過數據分析，為選民提供多一項投票時的參考指標，從而希望選出最具代表性的議員。"),l["default"].createElement("p",{className:"lead"},"所用之投票資料來自",l["default"].createElement("a",{href:"http://www.legco.gov.hk/general/chinese/open-legco/open-data.html",rel:"nofollow",target:"_blank"},"立法會網站"),"， 數據及源碼皆於 ",l["default"].createElement("a",{href:"https://github.com/ec5/election-match/",rel:"nofollow",target:"_blank"},"Github 上公開"),"， 歡迎指正錯漏或提出意見。"),l["default"].createElement("h2",{style:{marginTop:50}},"緣起"),l["default"].createElement("p",{className:"lead"},"經過不久前的立法會補選，忽然有一日反問自己是怎樣決定投票給誰的，出奇地發覺自己全依賴媒體上的資訊。"),l["default"].createElement("p",{className:"lead"},"除了候選人單方面宣傳的理念，難道就沒有更好的方法找出與自己理念相近的候選人嗎？為了解答這問題，就有了本網。"),l["default"].createElement("p",{className:"lead"},"實際製作之後，想了更多，發覺也有各樣限制（詳見「注意事項」），但願聊勝於無。"))};e["default"]=o}),require.register("components/CloseButton.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=n(a),o=function(e){var t=e.onClick;return l["default"].createElement("button",{type:"button",className:"close pull-right",ariaLabel:"Close",onClick:t},l["default"].createElement("span",{ariaHidden:"true"},"×"))};e["default"]=o}),require.register("components/DateRangeFilter.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=t("lodash"),s=n(c),d=t("react"),f=n(d),m=t("../motion"),p=function(e){function t(){return a(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),i(t,[{key:"componentDidMount",value:function(){$(this._input).daterangepicker(u({autoApply:!0,locale:{format:m.DATE_FORMAT},showDropdowns:!0},s["default"].pick(this.props,["startDate","endDate","minDate","maxDate"]))).on("change",this.props.onChange)}},{key:"render",value:function(){var e=this;return f["default"].createElement("input",{ref:function(t){e._input=t},type:"text",name:"datefilter",className:"form-control"})}}]),t}(f["default"].Component);e["default"]=p}),require.register("components/GenerateShareUrl.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=n(a),o=t("copy-to-clipboard"),u=n(o),i=t("react-bootstrap/lib/Button"),c=n(i),s=t("react-bootstrap/lib/FormGroup"),d=n(s),f=t("react-bootstrap/lib/InputGroup"),m=n(f),p=t("react-bootstrap/lib/FormControl"),v=n(p),h=function(e){try{(0,u["default"])(e)}catch(t){}},b=function(e){var t=e.url,r=e.shortUrl,n=e.onGenerateShortUrl;return l["default"].createElement("form",{onSubmit:function(e){e.preventDefault(),r?h(r):n(t,function(e){h(e.shortUrl)})}},l["default"].createElement(d["default"],null,l["default"].createElement(m["default"],null,l["default"].createElement(v["default"],{type:"text",value:r||t,readOnly:!0,style:{textOverflow:"ellipsis"}}),l["default"].createElement(m["default"].Button,null,l["default"].createElement(c["default"],{type:"submit",bsStyle:"primary"},"複製短網址")))))};e["default"]=b}),require.register("components/PageNavbar.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0});var l=t("react"),o=n(l),u=t("react-bootstrap/lib/Navbar"),i=n(u),c=t("react-bootstrap/lib/Nav"),s=n(c),d=t("react-bootstrap/lib/NavItem"),f=n(d),m=t("react-bootstrap/lib/Badge"),p=n(m),v=function(e){var t,r=e.activeTab,n=e.onSelectTab,l=e.votedCount,u=e.isAllVoted,c=l>0&&u;return o["default"].createElement("div",{style:{height:60}},o["default"].createElement(i["default"],{fixedTop:!0},o["default"].createElement(s["default"],(t={bsStyle:"pills",activeKey:1},a(t,"activeKey",r),a(t,"onSelect",n),a(t,"style",{marginLeft:0}),t),o["default"].createElement(f["default"],{eventKey:1},"選議案"),o["default"].createElement(f["default"],{eventKey:2,disabled:0===l},"投票",o["default"].createElement(p["default"],{className:c?"alert-success":""},l)),o["default"].createElement(f["default"],{eventKey:3,disabled:!c},"結果"),o["default"].createElement(f["default"],{eventKey:4},"注意",o["default"].createElement(p["default"],{className:"alert-danger"},"!")))))};e["default"]=v}),require.register("components/ScoreForm.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=n(a),o=t("react-bootstrap/lib/Panel"),u=n(o),i=function(e){var t=e.defaultExpanded,r=e.title,n=e.children;return l["default"].createElement(u["default"],{header:r,collapsible:!0,defaultExpanded:t,bsStyle:"info"},l["default"].createElement("form",null,n))};e["default"]=i}),require.register("components/ScoreFormGroup.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=t("react"),u=n(o),i=t("react-bootstrap/lib/InputGroup"),c=n(i),s=t("react-bootstrap/lib/FormControl"),d=n(s),f=function(e){var t=e.title,r=a(e,["title"]);return u["default"].createElement(c["default"],{style:{marginBottom:10}},u["default"].createElement(c["default"].Addon,null,t),u["default"].createElement(d["default"],l({type:"number"},r)))};e["default"]=f}),require.register("components/VoteDateDropdown.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){var r=[],n=!0,a=!1,l=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(i){a=!0,l=i}finally{try{!n&&u["return"]&&u["return"]()}finally{if(a)throw l}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=t("lodash"),o=n(l),u=t("react"),i=n(u),c=t("react-bootstrap/lib/DropdownButton"),s=n(c),d=t("react-bootstrap/lib/MenuItem"),f=n(d),m=t("../motion"),p=function(e){var t=e.motion,r=(0,m.getUrls)(t);return i["default"].createElement(s["default"],{bsStyle:"link",title:t.voteDate,id:"vote-date-dropdown-"+t.id,style:{paddingLeft:0,paddingRight:0}},o["default"].reduce([["agenda","會議議程"],["rundown","會議過程正式紀錄"],["minutesPdf","會議紀要 PDF"],["results","決定的紀錄"],["votingPdf","投票結果 PDF"],["votingResults","投票結果"]],function(e,t,n){var l=a(t,2),o=l[0],u=l[1],c=r[o];return c&&e.push(i["default"].createElement(f["default"],{key:n,href:c,rel:"nofollow",target:"_blank"},u)),e},[]),i["default"].createElement(f["default"],{divider:!0}),i["default"].createElement(f["default"],{href:r.index,rel:"nofollow",target:"_blank"},"會議"))};e["default"]=p}),require.register("components/VoteSectionHeader.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=n(a),o=t("react-bootstrap/lib/Nav"),u=n(o),i=t("react-bootstrap/lib/NavItem"),c=n(i),s=t("react-bootstrap/lib/Badge"),d=n(s),f=function(e){var t=e.activeTab,r=e.onSelectTab,n=e.votedCount,a=e.isAllVoted,o=e.canShare,i=n>0&&a;return l["default"].createElement("header",null,l["default"].createElement("h3",null,"假如你是立法會議員，你會如何投票？"),l["default"].createElement("p",{className:"lead"},"根據你的投票，找到相近似的議員"),l["default"].createElement(u["default"],{bsStyle:"tabs",activeKey:t,onSelect:r,justified:!0},l["default"].createElement(c["default"],{eventKey:1},"選議案"),l["default"].createElement(c["default"],{eventKey:2,disabled:0===n},"投票"," ",l["default"].createElement(d["default"],{className:i?"alert-success":""},n)),l["default"].createElement(c["default"],{eventKey:3,disabled:!i},"結果"),l["default"].createElement(c["default"],{eventKey:4,disabled:!o},"分享"),l["default"].createElement(c["default"],{eventKey:5},"注意事項"," ",l["default"].createElement(d["default"],{className:"alert-danger"},"!"))))};e["default"]=f}),require.register("components/renderMotionSelector.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("lodash"),l=n(a),o=t("react"),u=n(o),i=t("react-bootstrap/lib/Clearfix"),c=(n(i),t("react-bootstrap/lib/ListGroupItem")),s=n(c),d=t("./CloseButton"),f=(n(d),t("./VoteDateDropdown")),m=n(f),p=function(e){var t=e.motions,r=e.voted,n=e.onAddMotion,a=e.onRemoveMotion;return function(e){var o=t[e],i=l["default"].has(r,o.id);return u["default"].createElement(s["default"],{key:e,header:o.title,bsStyle:i?"success":"",onClick:function(){i?a(o.id):n(o)}},o.meetingType," ",u["default"].createElement(m["default"],{motion:o}))}};e["default"]=p}),require.register("components/renderMotionVote.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("lodash"),l=n(a),o=t("react"),u=n(o),i=t("react-bootstrap/lib/Clearfix"),c=n(i),s=t("./CloseButton"),d=n(s),f=t("./VoteDateDropdown"),m=n(f),p=function(e){var t=e.motions,r=e.voted,n=e.onVoteYes,a=e.onVoteNo,o=e.onRemoveMotion;return function(e){var i=t[e];return u["default"].createElement("div",{key:e,className:"form-group list-group-item lead"},u["default"].createElement("h4",{className:"list-group-item-heading"},u["default"].createElement(c["default"],{style:{margin:"0.5rem 0 1.5rem"}},l["default"].has(r,i.id)&&u["default"].createElement(d["default"],{onClick:function(){return o(i.id)}}),u["default"].createElement(m["default"],{motion:i})),i.title),u["default"].createElement("label",{className:"radio-inline"},u["default"].createElement("input",{type:"radio",name:i.id,value:"yes",onChange:function(){return n(i)},checked:"yes"===l["default"].get(r,i.id)})," 贊成"),u["default"].createElement("label",{className:"radio-inline"},u["default"].createElement("input",{type:"radio",name:i.id,value:"no",onChange:function(){return a(i)},checked:"no"===l["default"].get(r,i.id)})," 反對"))}};e["default"]=p}),require.register("initialize.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){var r=[],n=!0,a=!1,l=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(i){a=!0,l=i}finally{try{!n&&u["return"]&&u["return"]()}finally{if(a)throw l}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=t("lodash"),f=n(d),m=t("react-dom"),p=t("react"),v=n(p),h=t("react-bootstrap/lib/Button"),b=n(h),g=t("react-bootstrap/lib/ButtonToolbar"),y=n(g),E=t("react-bootstrap/lib/FormControl"),S=n(E),_=t("react-bootstrap/lib/Grid"),w=n(_),M=t("react-bootstrap/lib/Panel"),j=n(M),x=t("react-list"),D=n(x),O=t("react-scroll-up"),T=n(O),C=t("./motion"),P=t("./util"),N=t("./selectors"),U=t("./components/AboutSection"),V=n(U),k=t("./components/DateRangeFilter"),A=n(k),q=t("./components/GenerateShareUrl"),R=n(q),F=t("./components/PageNavbar"),B=n(F),G=t("./components/renderMotionVote"),I=n(G),K=t("./components/renderMotionSelector"),Y=n(K),L=t("./components/ScoreForm"),z=n(L),H=t("./components/ScoreFormGroup"),J=n(H),W="googleClientLoaded",X={yes:1,no:1,opposite:-1,novote:0},Q=function(e){function t(e){l(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.renderFilterVotesTab=function(){var e=r.state,t=e.data,n=e.voted,a=e.startDate,l=e.endDate,o=(0,N.filterMotionsSelector)(r.state);return v["default"].createElement("div",null,v["default"].createElement("h3",null,"假如你是立法會議員，你會如何投票？",v["default"].createElement("small",null,"根據你的投票，找到相近似的議員")),v["default"].createElement("p",{className:"lead"},"共 ",f["default"].size(t.motions)," 個議案，最近更新：",(0,N.maxDateSelector)(r.state).format(C.DATE_FORMAT),"。"),v["default"].createElement(A["default"],{minDate:(0,N.minDateSelector)(r.state),maxDate:(0,N.maxDateSelector)(r.state),startDate:a,endDate:l,onChange:function(e){var t=f["default"].map(f["default"].split(e.target.value," - "),function(e){return moment(e,C.DATE_FORMAT)}),n=c(t,2),a=n[0],l=n[1];r.setState({startDate:a,endDate:l})}}),v["default"].createElement(S["default"],{type:"text",placeholder:"輸入關鍵字篩選",value:r.state.filterText,onChange:function(e){return r.setState({filterText:e.target.value})}}),f["default"].isEmpty(o)?v["default"].createElement("p",{className:"text-warning"},"沒有議案可投票"):v["default"].createElement(D["default"],{itemRenderer:(0,Y["default"])({motions:o,voted:n,onAddMotion:r.onVote("pending"),onRemoveMotion:r.onRemoveMotion}),length:o.length,type:"simple"}))},r.renderSelectedVotesTab=function(){var e=r.state.voted,t=(0,N.votedMotionsSelector)(r.state),n=(0,N.votedStatsSelector)(r.state);return v["default"].createElement("div",null,f["default"].isEmpty(t)?v["default"].createElement("p",{className:"text-warning"},"未有投票"):v["default"].createElement(D["default"],{itemRenderer:(0,I["default"])({motions:t,voted:e,onVoteYes:r.onVote("yes"),onVoteNo:r.onVote("no"),onRemoveMotion:r.onRemoveMotion}),length:t.length,type:"simple"}),v["default"].createElement(y["default"],{style:{padding:"16px 0"}},n[null]?v["default"].createElement(b["default"],{onClick:r.onRemoveEmptyMotions,className:"pull-right"},"移除 ",n[null]," 個未投票議案"):v["default"].createElement(b["default"],{bsStyle:"primary",onClick:function(){return r.setState({activeTab:3})},className:"pull-right"},"看「配對結果」")),(0,N.canShareMotionsSelector)(r.state)&&v["default"].createElement("div",{style:{marginTop:50}},v["default"].createElement("p",{className:"lead"},"分享你已選取的議案"),v["default"].createElement("p",null,"對方只會看到議案表格，看不到你的投票，適合讓你的朋友就你關心的議題分享看法。"),v["default"].createElement(R["default"],{url:(0,N.motionsShareUrlSelector)(r.state),shortUrl:(0,N.motionsShortUrlSelector)(r.state),onGenerateShortUrl:r.onGenerateShortUrl}),v["default"].createElement("br",null)))},r.renderResultTab=function(){var e=r.state.scoreVars,t=(0,N.matchResultSelector)(r.state),n=v["default"].createElement("h3",null,"計分方法"),a=!f["default"].isEqual(e,X),l=(0,N.canShareVotedSelector)(r.state)&&v["default"].createElement("div",null,v["default"].createElement("p",null,"對方會看到你的投票及配對結果，適合讓你的朋友知道你對一些議題的看法。"),v["default"].createElement(R["default"],{url:(0,N.votedShareUrlSelector)(r.state),shortUrl:(0,N.votedShortUrlSelector)(r.state),onGenerateShortUrl:r.onGenerateShortUrl}));return v["default"].createElement("div",null,v["default"].createElement(z["default"],{title:n,defaultExpanded:a},v["default"].createElement(J["default"],{title:"相同贊成",value:e.yes,onChange:r.onScoreVarsChange("yes")}),v["default"].createElement(J["default"],{title:"相同反對",value:e.no,onChange:r.onScoreVarsChange("no")}),v["default"].createElement(J["default"],{title:"相反投票",value:e.opposite,onChange:r.onScoreVarsChange("opposite")}),v["default"].createElement(J["default"],{title:"沒有投票",value:e.novote,onChange:r.onScoreVarsChange("novote")})),v["default"].createElement(j["default"],{header:"分享你的結果",collapsible:!0,defaultExpanded:!1,bsStyle:"info"},l),v["default"].createElement("div",{className:"table-responsive"},v["default"].createElement("table",{className:"table table-striped table-hover table-condensed"},v["default"].createElement("thead",null,v["default"].createElement("tr",null,v["default"].createElement("th",null,"議員"),v["default"].createElement("th",null,"相似分數"),v["default"].createElement("th",null,"相同投票"),v["default"].createElement("th",null,"相反投票"),v["default"].createElement("th",null,"相同贊成"),v["default"].createElement("th",null,"相同反對"),v["default"].createElement("th",null,"沒有投票"))),v["default"].createElement("tbody",null,f["default"].map(t,function(e,t){return v["default"].createElement("tr",{key:t},v["default"].createElement("td",null,e.name),v["default"].createElement("td",null,e.matching.score),v["default"].createElement("td",null,e.matching.yes+e.matching.no),v["default"].createElement("td",null,e.matching.opposite),v["default"].createElement("td",null,e.matching.yes),v["default"].createElement("td",null,e.matching.no),v["default"].createElement("td",null,e.matching.novote))})),v["default"].createElement("tfoot",null,v["default"].createElement("tr",null,v["default"].createElement("td",{colSpan:7,style:{padding:16}},v["default"].createElement("p",null,"註：作為負責任的選民，不應只靠單一資訊投票，請參閱「",v["default"].createElement("a",{href:"#limitation"},"注意事項"),"」瞭解本網的一些限制。")))))),v["default"].createElement("p",{className:"lead"},"分享你的結果"),l)},r.onGenerateShortUrl=function(e,t){gapi.client.urlshortener.url.insert({resource:{longUrl:e}}).execute(function(n){var l=n.id;if(l){var o=r.state.shortUrls;r.setState({shortUrls:i({},o,a({},e,l))}),f["default"].isFunction(t)&&t({shortUrl:l})}})},r.onRemoveMotion=function(e){var t=f["default"].omit(r.state.voted,e);r.setState({voted:t})},r.onRemoveEmptyMotions=function(){var e=f["default"].omitBy(r.state.voted,f["default"].isEmpty);r.setState({voted:e})},r.state=i({activeTab:1,scoreVars:X},(0,N.initialStateFromUrl)(),{filterText:"",isGoogleClientLoaded:!1}),r}return u(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;$(window).on(W,function(){e.setState({isGoogleClientLoaded:!0})}).on("hashchange",function(){e.setState({currentNav:(0,P.getCurrentNav)()})}),$.getJSON("data.json",function(t){f["default"].each(t.motions,function(e,t){e.id=t,e.group=e.meetingType+" - "+e.voteDate,e.voteDateMoment=moment(e.voteDate,C.DATE_FORMAT)}),e.setState({data:t,startDate:(0,N.minDateSelector)({data:t}),endDate:(0,N.maxDateSelector)({data:t})})})}},{key:"renderAboutSection",value:function(){return v["default"].createElement(V["default"],null)}},{key:"onScoreVarsChange",value:function(e){var t=this;return function(r){var n=t.state.scoreVars;t.setState({scoreVars:i({},n,a({},e,f["default"].toSafeInteger(r.target.value)))})}}},{key:"onVote",value:function(e){var t=this;return function(r){var n=t.state.voted;t.setState({voted:i({},n,a({},r.id,e))})}}},{key:"render",value:function(){var e=this,t=this.state,r=t.currentNav,n=t.data,a=4,l="about"===r||"limitation"===r?a:(0,N.activeTabSelector)(this.state);if(!n)return v["default"].createElement("div",null,"載入議案資料中⋯⋯");var o={position:"fixed",bottom:30,right:0,cursor:"pointer",transitionDuration:"0.2s",transitionTimingFunction:"linear",transitionDelay:"0s"};return v["default"].createElement("div",{style:{paddingBottom:60}},v["default"].createElement(B["default"],{activeTab:l,onSelectTab:function(t){e.setState({activeTab:t}),a>t&&(location.hash="#vote")},votedCount:(0,N.votedCountSelector)(this.state),isAllVoted:(0,N.isAllVotedSelector)(this.state),canShare:(0,N.canShareSelector)(this.state)}),v["default"].createElement(w["default"],null,[this.renderFilterVotesTab,this.renderSelectedVotesTab,this.renderResultTab,this.renderAboutSection][l-1].call(this)),v["default"].createElement(T["default"],{showUnder:160,style:o},v["default"].createElement("img",{src:"/images/up.png",alt:"移至頂部"})))}}]),t}(v["default"].Component),Z=function(){var e="AIzaSyA8f91lvLDPchAInQKcjWX4LXjAiJbDEHo";gapi.client.setApiKey(e),gapi.client.load("urlshortener","v1",function(){$(window).trigger(W)})};window.initGoogleClient=Z,document.addEventListener("DOMContentLoaded",function(){(0,m.render)(v["default"].createElement(Q,null),document.getElementById("app"))})}),require.register("motion.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.getUrls=e.DATE_FORMAT=void 0;var a=t("lodash"),l=n(a),o=e.DATE_FORMAT="DD/MM/YYYY";e.getUrls=function(e){var t=e.meetingType,r=e.startDate,n=e.voteDateMoment,a=moment(r,o),u=(a.month()>=9?a.year():a.year()-1)%100,i=u+"-"+(u+1),c="http://www.legco.gov.hk/yr"+i+"/chinese/",s=a.format("YYYYMMDD"),d={"Council Meeting":{urls:{index:"http://www.legco.gov.hk/general/chinese/counmtg/yr12-16/mtg_"+u+(u+1)+".htm",agenda:c+"counmtg/agenda/cm"+s+".htm",minutesPdf:c+"counmtg/minutes/cm"+s+".pdf",votingPdf:c+"counmtg/voting/v"+s+".pdf",rundown:"http://www.legco.gov.hk/php/hansard/chinese/rundown.php?date="+n.format("YYYY-MM-DD")+"&lang=1"}},"Establishment Subcommittee":{index:"fc/esc/general/meetings.htm",code:"esc",prefix:c+"fc/esc",props:["agenda","minutesPdf"]},"Finance Committee":{index:"fc/fc/general/meetings.htm",code:"fc",prefix:c+"fc/fc",props:["agenda","minutesPdf","results","votingResults"]},"House Committee":{index:"hc/general/hc_mtg.htm",code:"hc",prefix:c+"hc",props:["agenda","minutesPdf"]},"Public Works Subcommittee":{index:"fc/pwsc/general/meetings.htm",code:"pwsc",prefix:c+"fc/pwsc",props:["agenda","minutesPdf","results"]}}[t];if(d.urls)return d.urls;var f=l["default"].pick({agenda:d.prefix+"/agenda/"+d.code+s+".htm",minutesPdf:d.prefix+"/minutes/"+d.code+s+".pdf",results:d.prefix+"/results/"+d.code+s+".htm",votingPdf:d.prefix+"/voting/v"+s+".pdf",votingResults:d.prefix+"/results/v"+s+".htm"},d.props);return f.index=""+d.prefix+d.index,f}}),require.register("selectors.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialStateFromUrl=e.votedCountSelector=e.minDateSelector=e.maxDateSelector=e.matchResultSelector=e.activeTabSelector=e.votedMotionsSelector=e.filterMotionsSelector=e.canShareSelector=e.canShareVotedSelector=e.isAllVotedSelector=e.votedStatsSelector=e.votedShortUrlSelector=e.votedShareUrlSelector=e.canShareMotionsSelector=e.motionsShortUrlSelector=e.motionsShareUrlSelector=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=t("query-string"),o=n(l),u=t("lodash"),i=n(u),c=t("reselect"),s=t("fuse.js"),d=n(s),f=t("./util"),m=function(e,t){return i["default"].get(t,[e])},p=function(e){return e.scoreVars},v=function(e){return e.voted},h=function(e){return e.shortUrls},b=e.motionsShareUrlSelector=(0,c.createSelector)(v,h,function(e,t){return(0,f.buildShareUrl)({motionIds:i["default"].keys(e)})}),g=(e.motionsShortUrlSelector=(0,c.createSelector)(b,h,m),e.canShareMotionsSelector=(0,c.createSelector)(v,b,function(e,t){return!i["default"].isEmpty(e)&&i["default"].size(t)<2048})),y=e.votedShareUrlSelector=(0,c.createSelector)(v,h,p,function(e,t,r){return(0,f.buildShareUrl)({scoreVars:r,voted:e})}),E=(e.votedShortUrlSelector=(0,c.createSelector)(y,h,m),e.votedStatsSelector=(0,c.createSelector)(v,function(e){return i["default"].countBy(e,function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return e})})),S=e.isAllVotedSelector=(0,c.createSelector)(E,function(e){return!e[null]}),_=e.canShareVotedSelector=(0,c.createSelector)(v,y,S,function(e,t,r){return r&&!i["default"].isEmpty(e)&&i["default"].size(t)<2048}),w=(e.canShareSelector=(0,c.createSelector)(g,_,function(e,t){return e||t}),(0,c.createSelector)(function(e){return e.data.motions},function(e){return new d["default"](i["default"].values(e),{keys:["title"]})})),M=(e.filterMotionsSelector=(0,c.createSelector)(function(e){return e.data.motions},function(e){return e.startDate},function(e){return e.endDate},function(e){return e.filterText},w,function(e,t,r,n,a){var l=i["default"].isEmpty(n)?e:a.search(n),o=i["default"].filter(l,function(e){return e.voteDateMoment.isBetween(t,r)});return i["default"].sortBy(o,"voteDateMoment").reverse()}),e.votedMotionsSelector=(0,c.createSelector)(function(e){return e.data.motions},v,function(e,t){return i["default"].filter(e,function(e){return!i["default"].isUndefined(i["default"].get(t,[e.id]))})}),e.activeTabSelector=(0,c.createSelector)(function(e){return e.activeTab},v,function(e,t){return i["default"].isEmpty(t)&&4>=e?1:e}),function(e){return{yes:"no",no:"yes"}[e]}),j=(e.matchResultSelector=(0,c.createSelector)(function(e){return e.data.motions},v,function(e){return e.data.members},function(e){return e.scoreVars},function(e,t,r,n){return i["default"].sortBy(i["default"].map(r,function(e,r){var a=i["default"].reduce(t,function(t,r,a){var l=e.votes[a];return l===r?(t.score+=n[r],t[r]+=1):l===M(r)?(t.score+=n.opposite,t.opposite+=1):l&&(t.score+=n.novote,t.novote+=1,t[l]+=1),t},{yes:0,no:0,opposite:0,novote:0,absent:0,present:0,abstain:0,score:0});return{name:r,matching:a}}),function(e){return-1*e.matching.score})}),(0,c.createSelector)(function(e){return e.data.motions},function(e){return i["default"].map(e,"voteDateMoment")}));e.maxDateSelector=(0,c.createSelector)(j,function(e){return i["default"].max(e)}),e.minDateSelector=(0,c.createSelector)(j,function(e){return i["default"].min(e)}),e.votedCountSelector=(0,c.createSelector)(v,function(e){return i["default"].size(e)}),e.initialStateFromUrl=function(){var e=o["default"].parse(window.location.search),t=e.s,r=t?(0,f.decompress)(t):{},n=i["default"].get(r,"motionIds");return n&&(r.voted=(0,f.convertMotionIdsToVoted)(n)),i["default"].isEmpty(r)||(r.activeTab=S(r)?3:2),a({},i["default"].omit(r,["_v","motionIds"]),{currentNav:(0,f.getCurrentNav)()})}}),require.register("util.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrentNav=e.convertMotionIdsToVoted=e.buildShareUrl=e.buildUrl=e.decompress=e.compress=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=t("url"),o=n(l),u=t("lodash"),i=n(u),c=t("base64-js"),s=n(c),d=t("pako"),f=n(d),m=e.compress=function(e){return s["default"].fromByteArray(f["default"].deflate(JSON.stringify(a({},e,{_v:2})),{level:9,memLevel:9}))},p=(e.decompress=function(e){try{return JSON.parse(f["default"].inflate(s["default"].toByteArray(e),{to:"string"}))}catch(t){return null}},e.buildUrl=function(e){var t=o["default"].parse(window.location.href);return delete t.search,t.hash="",t.query=e,o["default"].format(t)});e.buildShareUrl=function(e){return p({s:m(e)})},e.convertMotionIdsToVoted=function(e){return i["default"].reduce(e,function(e,t){return e[t]=null,e},{})},e.getCurrentNav=function(){var e=i["default"].trimStart(window.location.hash,"#");switch(e){case"about":case"limitation":return e;default:return"vote"}}}),require.alias("buffer/index.js","buffer"),require.alias("process/browser.js","process"),require.alias("punycode/punycode.js","punycode"),require.alias("querystring-es3/index.js","querystring"),require.alias("url/url.js","url"),e=require("process"),require.register("___globals___",function(e,t,r){})}(),require("___globals___");